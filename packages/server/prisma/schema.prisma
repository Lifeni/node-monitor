// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model SystemInfo {
  id       Int       @id @default(autoincrement())
  name     String    @unique
  time     Decimal   @unique
  system   System    @relation(fields: [systemId], references: [id])
  os       Os        @relation(fields: [osId], references: [id])
  cpu      Cpu       @relation(fields: [cpuId], references: [id])
  network  Network[]
  disk     Disk[]
  systemId Int       @unique
  osId     Int       @unique
  cpuId    Int       @unique
}

model System {
  id           Int         @id @default(autoincrement())
  manufacturer String
  model        String
  version      Decimal
  virtual      Boolean
  SystemInfo   SystemInfo?
}

model Os {
  id         Int         @id @default(autoincrement())
  platform   String
  distro     String
  release    String
  arch       String
  hostname   String
  SystemInfo SystemInfo?
}

model Cpu {
  id            Int         @id @default(autoincrement())
  manufacturer  String
  brand         String
  speed         Decimal
  cores         Int
  physicalCores Int
  processors    Int
  SystemInfo    SystemInfo?
}

model Network {
  id           Int         @id @default(autoincrement())
  iface        String
  ip4          String
  ip6          String
  mac          String
  SystemInfo   SystemInfo? @relation(fields: [systemInfoId], references: [id])
  systemInfoId Int?
}

model Disk {
  id           Int         @id @default(autoincrement())
  fs           String
  size         Decimal
  used         Decimal
  available    Decimal
  use          Decimal
  mount        String
  SystemInfo   SystemInfo? @relation(fields: [systemInfoId], references: [id])
  systemInfoId Int?
}

model SystemLoad {
  id       Int       @id @default(autoincrement())
  name     String
  time     Decimal   @unique
  load     Decimal
  cpu      Decimal[]
  memory   Memory    @relation(fields: [memoryId], references: [id])
  memoryId Int       @unique
}

model Memory {
  id         Int         @id @default(autoincrement())
  total      Decimal
  free       Decimal
  used       Decimal
  available  Decimal
  swaptotal  Decimal
  swapused   Decimal
  swapfree   Decimal
  buffcache  Decimal
  SystemLoad SystemLoad?
}
